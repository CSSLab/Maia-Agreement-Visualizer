<div class='explorer'>
<link rel="stylesheet" href="assets/chessboardjs/css/chessboard-1.0.0.css" />
<link rel="stylesheet" href="assets/css/widget_boards.css" />
<h1>Maia Prediction Visualizer</h1>

<div class="view-container">

    <div class="model_selection_column">
        <h3>Select which models correctly predicted the players, player rating or  moves and view an example chess board:</h3>
        <div class="model_input">

            For a players with rating: &nbsp;
            <select name="player" class="elo-selector" id="player_elo" onchange="update_explorer(false)">
                <option value="1100">1100</option>
                <option value="1300">1300</option>
                <option value="1500" selected="selected">1500</option>
                <option value="1700">1700</option>
                <option value="1900">1900</option>
            </select>
        </div>

        <div class="model_input">
            <p>Where the player &nbsp;</p>
            <select name="player" class="blunder-selector" id="player_blunder" onchange="update_explorer(false)">
                <option value="mistake"  selected="selected">Made a mistake</option>
                <option value="sf_wrong">Played suboptimal</option>
                <option value="sf_correct">Played optimally</option>
            </select>
        </div>

        <div class="model_input">
            And the board had: Few
            <input class="material-slider" type="range" min="1" max="10" value="5" id="material_count" oninput="update_explorer(true)">
            Many, pieces
        </div>

        <div class="model_input model_selector_input">
            <p> models are correct to:</p>
            <div class="model_selector_container">
            <form class="model_form">
                <input class="model-slider" type="range" min="1100" max="1900" value="1500" step="100" id="model_slider" name="model_slider" oninput="update_explorer(false)">
                <output for="model_slider" id="model_slider_label"></output>
                <span id='low-model' class="model_label label_1100 label_left"> 1100</span>
                <span id='high-model' class="model_label label_1900 label_right"> 1900</span>
                <input class="model-invert-button" type="button" value="Flip order" onclick="flip_order()">
            </form>

            </div>
        </div>
        <div class="model_input">
            <table class="moves_table">
                <tr>
                    <th>Model</th>
                    <th>Move</th>
                    <th>Correct</th>
                    <th>Confidence</th>
                </tr>
                <tr>
                    <td><span class="stockfish_text">Stockfish</span></td>
                    <td id="stockfish_move">Loading</td>
                    <td id="stockfish_correct"></td>
                    <td id="stockfish_conf">--</td>
                </tr>
                {% assign maia_indices = "1,2,3,4,5,6,7,8,9" | split: "," %}
                {% for maia_index in maia_indices %}
                <tr>
                <td><span class="maia_1{{ maia_index }}00_text">Maia 1{{ maia_index }}00</span></td>
                <td id="maia_1{{ maia_index }}00_move">loading</td>
                <td id="maia_1{{ maia_index }}00_correct"></td>
                <td id="maia_1{{ maia_index }}00_conf"></td>
                </tr>
                {% endfor %}

            </table>
        </div>

        <div class="info_panel">
                <p id='move_string'></p>
                <p id='count_string'></p>
                <p id='cp_string'><span class="loading_text">Loading</span></p>
        </div>
    </div>
    <div class="board-display">
        <div class='help-menu'><span class="arrow-human">&#8599; Green arrow</span> is the human's move and correctly predicted model's moves</div>
        <div class='help-menu'><span class="arrow-wrong">&#8599; Red arrow(s)</span> are the incorrectly predicted moves</div>
        <div class='help-menu'><span class="arrow-sf">&#8599; Blue arrow</span> is Stockfish's predicted move</div>
        <div id="board-container">
            <div id="board-svg-container"></div>
            <div id="explorer-board" class="explorer-board">
                <h2>Loading</h2>
                <noscript>You need Javascript enabled to use this</noscript>
            </div>
        </div>
    </div>
</div>


<script src="assets/js/jquery.js"></script>
<script src="assets/chessboardjs/js/chessboard-1.0.0.js"></script>
<script src="assets/js/chess.js"></script>
<script src="assets/js/board-explorer-backend.js"></script>
<script>
    setup_explorer_board("{{ include.data_path }}")
</script>
</div>
